---
description: 既存の何切る問題に対する回答と解説を生成してMarkdownファイルとして保存する
---

既存の問題ファイル `problems/NNN/question.md` を読み込み、その問題に対する回答と解説を生成してください。

## 要件

1. **問題ファイルの読み込み**
   - `problems/NNN/question.md` を読み込む（NNNは指定または最新の問題番号）
   - 問題が存在しない場合はエラーを出力

2. **回答の生成**
   - **重要な分析手順**:
     1. **Unicode牌の正確な識別**: CLAUDE.mdの参照表を使って牌を正確に識別
        - 特に🀠（8p）と🀡（9p）、🀎（8m）と🀏（9m）などを混同しないこと
     2. **手牌の向聴数を計算**: 問題文を鵜呑みにせず、実際に計算して確認
        - テンパイ（0シャンテン）、イーシャンテン（1シャンテン）など
        - 問題文の記述と実際の計算が異なる場合は、実際の計算結果を優先
     3. **見えている牌の集計**: 手牌、全河、ドラ表示牌から各牌の残り枚数を計算
     4. **推奨打牌の妥当性確認**: 推奨する打牌が手牌に実際に含まれているか確認
   - 問題の問いかけを正確に理解する
   - 問いかけに対する明確な回答を提示
   - 最適な打牌や判断を決定
   - その理由を詳しく解説

3. **回答の形式**
   回答は以下のMarkdown形式で `problems/NNN/solution.md` に保存してください（NNNは連番、001, 002, ..., 999, 1000, ...）：

   ```markdown
   # 何切る問題の回答 - YYYY年MM月DD日

   ## 問題の再掲
   [元の問題から手牌と状況、問いかけを引用]

   ## 回答
   [問題の問いかけに対応した回答を記述]

   例：
   - 「リーチをかけますか？」→「はい、🀇を切ってリーチをかけるべきです。」
   - 「攻めますか？降りますか？」→「この局面では降りるべきです。🀆を切って安全牌を確保しましょう。」
   - 「どの牌を鳴きますか？」→「鳴かずに🀈を切るのが最善です。」

   ## 解説

   ### 手牌の分析
   - 現在の形: [テンパイ/1シャンテン/2シャンテンなど]
   - 有効牌: [何を引けば良い形になるか]

   ### 各候補の検討

   #### 🀇を切った場合
   - メリット: [...]
   - デメリット: [...]
   - 受け入れ枚数: X枚

   #### 🀈を切った場合
   - メリット: [...]
   - デメリット: [...]
   - 受け入れ枚数: Y枚

   ### 結論
   [なぜこの牌を切るべきかの総括]

   ## 別解・補足
   [状況によっては他の選択肢もありうる場合の説明]

   ## 学習ポイント
   - [この問題から学べる麻雀の考え方や技術]
   ```

4. **解説の品質**
   - 初心者にも分かりやすい説明を心がける
   - 複数の候補がある場合はそれぞれを比較
   - 受け入れ枚数や期待値などの定量的な情報も含める
   - 難易度に応じて解説の詳しさを調整

5. **確認事項（必ず実施すること）**

   **手牌認識の正確性**:
   - ✅ Unicode牌参照表（CLAUDE.md）を使って牌を正確に識別したか
   - ✅ 手牌13枚を正しく読み取れているか
   - ✅ 推奨打牌が実際に手牌に含まれているか確認したか

   **向聴数計算の正確性**:
   - ✅ 手牌の向聴数を実際に計算したか（問題文を鵜呑みにしない）
   - ✅ 解説で「テンパイ」と書くなら、実際にテンパイか確認したか
   - ✅ 問題文の記述と実際の計算が異なる場合、実際の計算結果を優先したか

   **牌の枚数計算の正確性**:
   - ✅ 見えている牌を正確に集計したか（手牌 + 全河 + ドラ表示牌 + 鳴き牌）
   - ✅ 各牌の残り枚数を正しく計算したか（各牌は4枚まで）
   - ✅ 待ち牌の残り枚数を計算したか（河に見えている分を除外）
   - ✅ 受け入れ枚数の計算が正確か（見えている牌を考慮）
   - ✅ アウト牌（危険牌）の枚数計算が正しいか

   **ファイル保存の確認**:
   - ✅ ファイルが `problems/NNN/solution.md` 形式で保存されることを確認
   - ✅ 解説が論理的で分かりやすいことを確認

回答を生成した後、ファイルパスを出力してください。

**使用方法**:
- 引数なし: 最新の問題に対する回答を生成（例: `problems/003/solution.md`）
- 引数あり: 指定した番号の問題に対する回答を生成（例: 引数に1を指定 → `problems/001/solution.md`）
