---
description: 麻雀の何切る問題を自動生成してMarkdownファイルとして保存する
---

今日の日付（YYYY-MM-DD形式）で新しい麻雀の何切る問題を生成してください。

## 要件

1. **問題の生成**
   - ランダムな難易度（1〜10の10段階）を設定
   - 問題のテーマを設定（例：リーチ判断、手役選択、押し引き、待ち選択、形式テンパイ、鳴き判断、安全牌選択など）
   - **手牌の作成（重要：向聴数を正しく認識すること）**:
     - テンパイ、イーシャンテン、リャンシャンテンなど、どの状態でも問題として有効
     - **重要**: 作成した手牌の向聴数を正確に把握し、問題文に正しく反映すること
     - 手牌作成の推奨手順：
       1. **完成形（14枚）から逆算**：和了形（4面子1雀頭）を作成
          - 例：🀈🀉🀊🀛🀜🀝🀔🀕🀖🀕🀕🀖🀗🀘
          - 分解：234m + 345p + 456s + 66s + 789s
       2. **向聴数に応じて調整**：
          - テンパイ問題：待ち牌を1枚抜く（例：🀖を抜いて🀖待ちのテンパイ）
          - イーシャンテン問題：面子を一部崩す
          - リャンシャンテン以上：さらに崩す
       3. **向聴数を計算して確認**：作成した13枚が何シャンテンか確認
       4. **問題文に正確に記載**：確認した向聴数を問題文に反映
          - 例：「現在テンパイ」「イーシャンテンの手牌」など
   - 局面の状態を設定（東1局、南2局など）
   - ドラ表示牌を設定
   - 自風・場風を設定
   - 河（捨て牌）の情報を含める
   - 現在の点数状況（任意）

2. **問題の形式**
   問題は以下のMarkdown形式で `problems/NNN/question.md` に保存してください（NNNは連番、001, 002, ..., 999, 1000, ...）：

   ```markdown
   # 何切る問題 - YYYY年MM月DD日

   **難易度**: ★★★★★☆☆☆☆☆ (5/10)
   **テーマ**: [リーチ判断/手役選択/押し引き/待ち選択/形式テンパイ/鳴き判断/安全牌選択など]

   ## 局面情報
   - 場: 東1局/南2局など
   - 自風: 東/南/西/北
   - ドラ表示牌: 🀇
   - 巡目: X巡目

   ## あなたの手牌
   ```
   🀇🀈🀉🀊🀋🀌🀍🀎🀏🀙🀚🀛🀜
   ```

   ## 河（捨て牌）
   **自分**: 🀀🀁🀂
   **下家**: 🀃🀄🀅
   **対面**: 🀆🀐🀑
   **上家**: 🀒🀓🀔

   ## 状況
   [必要に応じて追加の状況説明]

   ## 問題
   [テーマに応じた適切な問いかけを生成してください]

   例：
   - リーチ判断: 「この局面でリーチをかけますか？かけるなら何を切ってリーチしますか？それとも黙聴でしょうか？」
   - 手役選択: 「この手牌は何を目指すべきでしょうか？ホンイツ？チンイツ？それともタンヤオ？」
   - 押し引き: 「相手の手が進んでいるようですが、この局面で攻めますか？降りますか？」
   - 待ち選択: 「テンパイ時の待ちはどう選びますか？良形を取るべきか、ドラを残すべきか？」
   - 鳴き判断: 「この牌を鳴きますか？鳴くとしたら何を切りますか？鳴かない場合の打牌は？」
   - 安全牌選択: 「相手のリーチに対してどの牌を切りますか？最も安全な牌は？」
   ```

3. **牌の表記**
   - Unicode麻雀牌を使用（🀇-🀏 萬子、🀙-🀡 筒子、🀐-🀘 索子、🀀-🀆 字牌）
   - または数字表記（1m, 2p, 3s, 東, 南, 西, 北, 白, 發, 中）

4. **確認事項（必ず実施すること）**

   **手牌の妥当性チェック**:
   - ✅ 完成形（14枚）を先に作成し、4面子1雀頭が成立することを確認したか
   - ✅ 完成形から1枚抜いて13枚にしたか（テンパイ・イーシャンテンなどテーマに応じて）
   - ✅ 手牌が正確に13枚であることを確認
   - ✅ Unicode麻雀牌の参照表（CLAUDE.md）で牌の識別が正しいか確認
     - 例：🀠（8p）と🀡（9p）を混同していないか

   **牌の枚数制限チェック**:
   - ✅ 麻雀では各牌は4枚までしか存在しない
   - ✅ 自分の手牌 + 全プレイヤーの河 + ドラ表示牌 + 鳴き牌で、同じ牌が5枚以上にならないこと
   - ✅ 例：🀇が自分の手牌に2枚、全員の河に合計2枚ある場合、残りは0枚（4枚全て見えている）

   **河の枚数と巡目の整合性チェック**:
   - ✅ 鳴きなしの場合：各プレイヤーの河の枚数は（巡目 - 1）枚が基本
   - ✅ 鳴きありの場合：鳴いたプレイヤーは河が減る（ポン/チーで3枚分、カンで4枚分）
   - ✅ リーチの場合：リーチ宣言した巡目までの河の枚数が妥当か確認
   - ✅ 例：11巡目なら各プレイヤーの河は基本10枚（鳴きがある場合は調整）

   **ファイル保存の確認**:
   - ✅ ファイルが `problems/NNN/question.md` 形式で保存されることを確認（NNNは自動採番）

問題を生成した後、ファイルパスを出力してください。

**使用方法**:
- 引数なし: 次の番号で自動生成（例: `problems/001/question.md`）
- 引数あり: 指定した番号で生成（例: 引数に5を指定 → `problems/005/question.md`）
